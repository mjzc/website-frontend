webpackJsonp([13],{"3jKl":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("FNMO"),o=n("lkSh"),a=n("HKE2"),s=n.n(a),c=n("qIga"),l={name:"editArticles",data:function(){return{title:"",classId:"",classList:[],introductionText:"",content:"",converter:null,html:""}},watch:{content:"contentChanged"},components:{"top-mine-head":i.a,"left-mine-nav":o.a},mounted:function(){this.init()},created:function(){this.id=this.$route.query.id,void 0!=this.id&&""!=this.id&&(this.getClass(),this.getArticleContent())},methods:{contentChanged:function(){this.html=this.converter.makeHtml(this.content),document.getElementById("show-content").innerHTML=this.html},init:function(){var t=new s.a.Converter;this.converter=t},getClass:function(){var t=this;Object(c.s)().then(function(e){200==e.data.code&&(t.classList=e.data.list)}).catch(function(t){console.log(t)})},getArticleContent:function(){var t=this;Object(c.u)({id:this.id}).then(function(e){t.title=e.data.result.title,t.classId=e.data.result.belongClass,t.introductionText=e.data.result.introductionText,t.content=e.data.result.contentHtml}).catch(function(t){console.log(t)})},editArticle:function(){var t=this;if(""!=this.content&&""!=this.title&&""!=this.introductionText&&""!=this.classId){var e={id:this.id,title:t.title,contentHtml:t.content,classId:t.classId,introductionText:t.introductionText};Object(c.m)(e).then(function(e){200==e.data.code?(alert("修改成功"),t.$router.push("/web_admin/article_manage")):alert(e.data.msg)}).catch(function(t){console.log(t)})}else alert("请输入内容")}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"text-content"},[n("label",{attrs:{for:""}},[t._v("文章表题：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input-box",attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),n("div",{staticClass:"introdution-box"},[n("label",{attrs:{for:""}},[t._v("文章简介：")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.introductionText,expression:"introductionText"}],staticClass:"introdution-input",attrs:{name:"",id:"",cols:"30",rows:"3"},domProps:{value:t.introductionText},on:{input:function(e){e.target.composing||(t.introductionText=e.target.value)}}})]),t._v(" "),n("div",{staticStyle:{"margin-top":"30px"}},[n("label",{attrs:{for:""}},[t._v("文章分类：")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.classId,expression:"classId"}],staticClass:"input-box",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.classId=e.target.multiple?n:n[0]}}},t._l(t.classList,function(e){return n("option",{key:e,domProps:{value:e.id}},[t._v(t._s(e.name))])}))])]),t._v(" "),n("div",[n("p",[t._v("使用Markdown编辑内容")]),t._v(" "),n("div",{staticClass:"edit-md-box"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"md-box",domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),n("div",{attrs:{id:"show-content"}})])]),t._v(" "),n("div",{staticClass:"group-btn",staticStyle:{"text-align":"right"}},[n("button",{staticClass:"refresh-btn",on:{click:t.editArticle}},[t._v("修改")])])])},staticRenderFns:[]},d=n("VU/8")(l,r,!1,function(t){n("jS6X")},null,null);e.default=d.exports},jS6X:function(t,e){}});
//# sourceMappingURL=13.637dfeed71df9e1d328e.js.map