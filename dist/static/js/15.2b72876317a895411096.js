webpackJsonp([15],{hyI6:function(t,e){},wyhH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("qIga"),i={name:"userManage",data:function(){return{id:"",blogName:"",blogIntro:"",imageUrl:"",fileName:"",uploadImgUrl:""}},created:function(){this.uploadImgUrl="https://www.mjiacc.cn/backend/web_uploadBlogHeadImg",this.id=this.$store.state.id,this.getAuthorInfo()},methods:{handleAvatarSuccess:function(t,e){this.fileName=e.name,this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a="image/png"===t.type,o=t.size/1024/1024<2;return e||a||this.$message.error("上传头像图片只能是 JPG 或者 PNG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),a||e&&o},getAuthorInfo:function(){var t=this;Object(o.w)({id:this.id}).then(function(e){t.blogName=e.data[0].blogName,t.blogIntro=e.data[0].blogIntro,t.imageUrl=e.data[0].blogHeadImg}).catch(function(t){console.log(t)})},editUserInfo:function(){var t=this;if(""!=this.blogName){var e={id:this.id,blogName:this.blogName,blogIntro:this.blogIntro,blogHeadImg:this.fileName};Object(o.n)(e).then(function(e){2e4==e.data.code?(alert("success"),t.$router.go(0)):alert(e.data.msg)}).catch(function(t){console.log(t)})}else alert("内容不完整！")}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"85%",margin:"30px auto"}},[a("div",{staticClass:"from-row-box"},[a("label",{attrs:{for:""}},[t._v("昵称：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.blogName,expression:"blogName"}],staticClass:"input-box",attrs:{type:"text",placeholder:""},domProps:{value:t.blogName},on:{input:function(e){e.target.composing||(t.blogName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"from-row-box"},[a("label",{attrs:{for:""}},[t._v("简介：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.blogIntro,expression:"blogIntro"}],staticClass:"input-box",attrs:{type:"text",placeholder:""},domProps:{value:t.blogIntro},on:{input:function(e){e.target.composing||(t.blogIntro=e.target.value)}}})]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{name:"file",method:"post",action:t.uploadImgUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"user-btn",on:{click:t.editUserInfo}},[t._v("修改")])])],1)},staticRenderFns:[]},s=a("VU/8")(i,r,!1,function(t){a("hyI6")},null,null);e.default=s.exports}});
//# sourceMappingURL=15.2b72876317a895411096.js.map